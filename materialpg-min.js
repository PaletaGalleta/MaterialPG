function initialize(){loadComponents(),detectColorScheme();document.querySelectorAll("#themeswitch").forEach((e=>e.addEventListener("click",switchTheme))),"dark"==document.documentElement.getAttribute("data-theme")&&(document.getElementById("themeswitch").querySelector(".item").innerHTML='dark_mode<span class="desc">Modo Claro</span>');const e=document.createElement("div");e.classList.add("notification"),document.body.prepend(e);const t=document.querySelector(".top-bar"),s=document.body;t&&s&&(t.classList.contains("scrolled")||s.addEventListener("scroll",(()=>{setClass(s.scrollTop>0,t,"scrolled")})));const i=new IntersectionObserver(handleIntersection,{threshold:.4});document.querySelectorAll(".anim-intersect").forEach((e=>{e.classList.add("anim-none"),e.style.opacity=0,i.observe(e)})),document.dispatchEvent(new Event("MaterialPGInitialized"))}function switchTheme(){const e=document.getElementById("themeswitch").querySelector(".item");"dark"!=document.documentElement.getAttribute("data-theme")?(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-theme","dark"),e.innerHTML='dark_mode<span class="desc">Modo Claro</span>',e.title="Habilitar Modo Claro"):(localStorage.setItem("theme","light"),document.documentElement.setAttribute("data-theme","light"),e.innerHTML='light_mode<span class="desc">Modo Oscuro</span>',e.title="Habilitar Modo Oscuro")}function detectColorScheme(){let e="light";if(localStorage.getItem("theme"))"dark"==localStorage.getItem("theme")&&(e="dark");else{if(!window.matchMedia)return!1;window.matchMedia("(prefers-color-scheme: dark)").matches&&(e="dark")}"dark"==e&&document.documentElement.setAttribute("data-theme","dark")}function loadComponents(){document.addEventListener("click",(e=>{const t=e.target;if(t.closest(".accordion-title")){let e=t.closest(".accordion");e||(e=t.closest(".cardaccordion")),e.classList.toggle("open")}if(t.closest(".searcharea")){const e=t.closest(".searcharea");if(t.closest("#cleartext")){const s=e.querySelector(".searchfield");s&&(s.value=""),t.closest("#cleartext").classList.add("hidden");const i=e.querySelector(".searchsuggestions");i&&(i.innerHTML="",i.classList.remove("show"))}}if(t.closest("#showpassword")){const e=t.closest("#showpassword"),s=e.parentElement.querySelector("input");"password"==s.type?(s.type="text",e.title="Ocultar Contraseña",e.innerHTML="visibility_off"):(s.type="password",e.title="Mostrar Contraseña",e.innerHTML="visibility")}if(t.closest("#shareButton")){var s=window.location.href;if(navigator.share)navigator.share({title:document.title,text:"Mira lo que encontré:",url:s}).then((()=>{})).catch((e=>{}));else{const e=document.createElement("textarea");e.value=s,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),alert(`La opción de compartir no está admitida por el explorador. Se ha copiado el enlace ${s} al portapapeles`)}}if(t.closest('[data-mdpg-dismiss="modal"]')){const e=t.closest('[data-mdpg-dismiss="modal"]').closest(".modal-dialog");if(!e)return;const s=e.closest(".modal");e.classList.remove("show"),s&&s.classList.remove("show")}if(t.closest("[data-mdpg-toggle]")){const e=t.closest("[data-mdpg-toggle]"),s=e.dataset.mdpgToggle;if(!e.dataset.mdpgTarget)return;document.querySelector(e.dataset.mdpgTarget).classList.toggle(s)}}),!0),document.addEventListener("mousedown",(e=>{const t=e.target;if(t.closest('[class*="button-"], .listitem, .toolbar .button, .Chip, .accordion-title')){const s=t.offsetWidth,i=document.createElement("span");i.className="ripple",i.style.left=e.layerX+"px",i.style.top=e.layerY+"px",i.style.setProperty("--scale",s),t.appendChild(i),setTimeout((()=>{i.parentNode&&i.parentNode.removeChild(i)}),500)}}),!0),document.addEventListener("focusin",(e=>{const t=e.target;if(t.matches("input.searchfield")){const t=e.target.closest(".searcharea");if(t){const e=t.querySelector(".searchsuggestions");e&&e.childElementCount>0&&e.classList.add("show")}}else t.matches('[class*="textfield-"] input, [class*="textfield-"] textarea, [class*="textfield-"] select')&&verifyValidity(t)})),document.addEventListener("focusout",(e=>{const t=e.target;if(t.matches('[class*="textfield-"] input, [class*="textfield-"] textarea, [class*="textfield-"] select')){const e=t.closest('[class*="textfield-"]');if(t.value.length>0){if(t.value=t.value.trim(),t.dataset.mdpgInput){if("money"==t.dataset.mdpgInput){const e=(+t.value).toFixed(2);t.value=e}}t.validity.valid||(e&&e.classList.add("open"),verifyValidity(t))}else e&&!e.classList.contains("openlock")&&e.classList.remove("open")}else if(t.matches(".searchfield")){const e=t.closest(".searcharea");if(e){const t=e.querySelector(".searchsuggestions.show");t&&setTimeout((()=>{t.classList.remove("show")}),200)}}})),document.addEventListener("input",(e=>{if(e.target.matches('[class*="textfield-"] input, [class*="textfield-"] textarea, [class*="textfield-"] select')){const t=e.target,s=t.closest('[class*="textfield-"]');if(verifyValidity(t),s&&s.classList.add("open"),"number"==t.type&&!t.dataset.mdpgInput){let s=t.getAttribute("maxlength");s&&(s=+s,e.preventDefault(),t.value=t.value.slice(0,s))}if(t.matches('[class*="textfield-"] input, [class*="textfield-"] textarea')){const i=s.querySelector(".counter");if(i){const e=t.maxLength,s=t.value.length;i.innerHTML=`${s}/${e}`}if(verifyValidity(t),s&&s.classList.add("open"),"number"==t.type&&!t.dataset.mdpgInput){let s=t.getAttribute("maxlength");s&&(s=+s,e.preventDefault(),t.value=t.value.slice(0,s))}}}else if(e.target.matches(".searchfield")){const t=e.target,s=t.parentElement.querySelector("#cleartext");s&&setClass(0==t.value.length,s,"hidden")}}));document.querySelectorAll(".carousel").forEach((e=>{new materialpg.Carousel(e)}));document.querySelectorAll(".slideshow").forEach((e=>{new materialpg.Slideshow(e)}));document.querySelectorAll(".thumbnail-container[data-mdpg-prodview]").forEach((e=>{const t=e.dataset.mdpgProdview;materialpg.productViews[t]=new materialpg.ProductView(e)}))}function verifyValidity(e){const t=e.closest('[class*="textfield-"]');let s=e.validity.valid;if(0==e.value.length)return void setTextFieldError(e,null);if("password-confirm"==e.name){const i=t.closest("form");if(i){const t=i.querySelector('input[name="new-password"]');t&&(s=t.value==e.value,e.setCustomValidity(s?"":"Las contraseñas no coinciden"))}}const i=t.querySelector(".placeholder"),a=i&&i.hasAttribute("data-error")?i.dataset.error:null;setTextFieldError(e,s?null:a)}function setTextFieldError(e,t=null){const s=null==t,i=e.closest('[class*="textfield-"]');setClass(!s,i,"error");const a=i.querySelector(".placeholder");a&&(s||0==e.value.length?a.hasAttribute("data-normal")?a.innerHTML=a.dataset.normal:a.hasAttribute("data-error")==a.innerHTML&&(a.innerHTML=""):(a.dataset.normal||t==a.innerHTML||(a.dataset.normal=a.innerHTML),a.innerHTML=t))}function handleIntersection(e,t){e.forEach((e=>{if(e.isIntersecting){e.target.classList.remove("anim-none"),e.target.style.opacity=1;const s=e.target.dataset.mdpgAnim;s&&e.target.classList.add(s),t.unobserve(e.target)}}))}function setClass(e,t,s){t&&(e?"string"==typeof s?t.classList.add(s):Array.isArray(s)&&s.forEach((e=>{t.classList.add(e)})):"string"==typeof s?t.classList.remove(s):Array.isArray(s)&&s.forEach((e=>{t.classList.remove(e)})))}function isPath(e){return/^(\/?[a-zA-Z0-9_-]+)+\/?$/.test(e)}function showSnackbar(e,t=5e3){let s=document.querySelector(".notification");if(!s){const e=document.createElement("div");e.classList.add("notification"),document.body.append(e),s=e}const i=document.createElement("div");i.classList.add("snackbar");const a=document.createElement("div"),n=document.createElement("span");n.innerHTML=e;const o=document.createElement("div");o.classList.add("button-text"),o.innerHTML="Cerrar",o.addEventListener("click",(e=>{i.classList.add("fade"),setTimeout((()=>{i.remove()}),500)})),a.append(n),a.append(o),i.append(a),s.append(i),t>0&&setTimeout((()=>{i.classList.add("fade"),setTimeout((()=>{i.remove()}),2e3)}),t)}document.addEventListener("DOMContentLoaded",initialize);var materialpg={Carousel:class{constructor(e,t=5e3){this.domElement=e,this.children=e.querySelectorAll(".carouselimg"),this.currentItem=0,this.timer=this.domElement.dataset.mdpgTime?this.domElement.dataset.mdpgTime:t,this.showItem(0)}showItem(e){e>=this.children.length&&(e=0),e<0&&(e=this.children.length-1);for(let e=0;e<this.children.length;e++)this.children[e].classList.remove("large"),this.children[e].classList.remove("medium"),this.children[e].classList.remove("small");this.children[e].classList.add("large"),this.children[e-1]&&this.children[e-1].classList.add("medium"),this.children[e+1]&&this.children[e+1].classList.add("medium"),this.children[e-2]&&this.children[e-2].classList.add("small"),this.children[e+2]&&this.children[e+2].classList.add("small"),this.currentItem=e,setTimeout((()=>this.nextItem()),this.timer)}nextItem(){this.showItem(this.currentItem+1)}},Slideshow:class{constructor(e,t=5e3){this.domElement=e,this.children=this.domElement.querySelectorAll(".slide"),this.currentItem=0,this.timer=this.domElement.dataset.mdpgTime?this.domElement.dataset.mdpgTime:t,this.showSlide(0)}showSlide(e){e>=this.children.length&&(e=0),e<0&&(e=this.children.length-1),this.children.forEach((e=>e.classList.remove("active"))),this.children[e].classList.add("active"),this.currentItem=e,setTimeout((()=>this.nextSlide()),this.timer)}nextSlide(){this.showSlide(this.currentItem+1)}},productViews:{},ProductView:class{constructor(e){this.targetID=e.dataset.mdpgProdview,this.thumbnailContainer=e,this.thumbnails=[];e.querySelectorAll(".thumbnail").forEach((e=>{this.addThumbnail(e)}))}addClick(e){e.addEventListener("click",this.activateThumb.bind(this,e))}static areImagesEqual(e,t){return e.querySelector("img").src==t.querySelector("img").src}activateThumb(e){const t=document.querySelector(this.targetID),s=e.querySelector("img").src;t.src=s,this.thumbnails.forEach((t=>{setClass(materialpg.ProductView.areImagesEqual(e,t),t,"bg-primary")}))}getSelectedElement(){let e;return this.thumbnails.some((t=>{if(t.classList.contains("bg-primary"))return e=t,!0}))?e:void 0}addThumbnail(e){return!this.thumbnails.some((t=>materialpg.ProductView.areImagesEqual(t,e)))&&(this.thumbnails.push(e),this.addClick(e),1==this.thumbnails.length&&this.activateThumb(e),!0)}removeThumbnail(e){const t=e.parentElement;if(!t)return!1;let s=Array.prototype.indexOf.call(t.children,e);if(-1!=s){this.thumbnails.length>1&&e.classList.contains("bg-primary")&&(0==s?this.activateThumb(this.thumbnails[1]):this.activateThumb(this.thumbnails[s-1])),this.thumbnails.splice(s,1);const t=e.querySelector("img").src,i=e.querySelector("img").alt;return e.parentElement.removeChild(e),[t,i]}return!1}},Modal:class{constructor(e,t={}){if(this.domElement=document.querySelector(e),!this.domElement)throw new Error("Modal element not found");if(this.domDialog=this.domElement.querySelector(".modal-dialog"),!this.domDialog)throw new Error("Modal dialog not found");this.evtOptions={bubbles:!1,cancelable:!1},this.backdrop=t.backdrop||!0,this.focus=t.focus||!0,this.keyboard=t.keyboard||!0,this.isShown=this.domElement.classList.contains("show"),this.backdrop&&this.domElement.classList.add("modal-backdrop"),this.domElement.addEventListener("click",(e=>{"static"!==this.backdrop&&this.hide()}))}dispose(){this.domElement.remove()}getInstance(){return this.domElement}show(){this.domElement.addEventListener("animationend",(e=>{this.domElement.dispatchEvent(new Event("shown.mdpg.modal",this.evtOptions))}),{once:!0}),this.domElement.dispatchEvent(new Event("show.mdpg.modal",this.evtOptions)),this.domElement.classList.add("show"),this.domDialog.classList.add("show"),this.isShown=!0,document.addEventListener("keydown",(e=>{"Escape"===e.key&&this.keyboard&&this.hide()}))}hide(){this.domElement.addEventListener("animationend",(()=>{this.domElement.dispatchEvent(new Event("hidden.mdpg.modal",this.evtOptions))}),{once:!0}),this.domElement.dispatchEvent(new Event("hide.mdpg.modal",this.evtOptions)),this.domDialog.classList.remove("show"),this.domElement.classList.remove("show"),this.isShown=!1}toggle(){this.isShown?this.hide():this.show()}},DataTable:class{constructor(e,t,s,i){this.domElement=e,this.tableData=i,this.destination=s,this.totalPages=0,this.data=[],this.page=t,this.options={search:{term:"",column:[]},sort:{column:"",direction:""},limit:0,page:1},this.helpers={},this.createHelpers(),this.initSorters(),this.getData()}createHelpers(){this.tableDiv=this.domElement.querySelector(".table-card"),this.helpers.loading=document.createElement("div"),this.helpers.loading.classList.add("card-elevated","table-loading","d-none"),this.helpers.loading.innerHTML='<div class="card-empty"><div class="spinner mb-4"></div><span>Cargando</span></div>',this.helpers.error=document.createElement("div"),this.helpers.error.classList.add("card-elevated","table-error","d-none");const e=document.createElement("div");e.classList.add("card-empty"),e.innerHTML='<div class="icon">assignment_late</div><span>Oops! Ocurrió un error</span>';const t=document.createElement("div");t.classList.add("button-outlined","mt-4"),t.innerHTML="Intentar de nuevo",t.addEventListener("click",this.getData.bind(this)),e.append(t),this.helpers.error.append(e),this.helpers.empty=document.createElement("div"),this.helpers.empty.classList.add("card-elevated","table-empty","d-none"),this.helpers.empty.innerHTML='<div class="card-empty"><div class="icon">assignment_late</div><span>Oops! Ocurrió un error</span></div>',this.domElement.append(this.helpers.loading),this.domElement.append(this.helpers.error),this.domElement.append(this.helpers.empty)}initSorters(){this.sorters=this.domElement.querySelectorAll(".table-sort[data-mdpg-column-sort]"),this.sorters.forEach((e=>{e.querySelectorAll(".clickable").forEach((t=>{t&&t.addEventListener("click",this.tableSort.bind(this,t,e))}))}))}tableSort(e,t){const s=["ASC","DESC"],i=["arrow_upward","arrow_downward"],a=t.dataset.mdpgColumnSort;this.sorters.forEach((e=>{e.querySelectorAll(".clickable").forEach((s=>{const i=s.querySelector("[data-mdpg-sort-direction]");i&&e!=t&&s.removeChild(i)}))}));const n=e.querySelector("[data-mdpg-sort-direction]");if(n){0==+n.dataset.mdpgSortDirection?(n.dataset.mdpgSortDirection=1,n.innerHTML=i[1],this.setSort(a,s[1])):(e.removeChild(n),this.setSort(""))}else e.innerHTML+=`<span class="icon" data-mdpg-sort-direction="0">${i[0]}</span>`,this.setSort(a,s[0])}displayTable(){const e=this.domElement.querySelector("tbody");e.innerHTML="",this.response&&this.response.data&&this.response.data.records&&this.response.data.records.forEach((t=>{const s=document.createElement("tr");s.id=t.id||"";for(const e in this.tableData){let i=this.tableData[e][0];i+=t[e]||this.tableData[e][2]||"",i+=this.tableData[e][1],s.innerHTML+=i}this.rowCallback&&s.addEventListener("click",(()=>{this.rowCallback(s)})),e.append(s);e.querySelectorAll("img").forEach((e=>{e.addEventListener("error",(function(){this.src="/img/product/noimage.png"}))}))})),this.genPagination()}setPage(e){this.options.page!=e&&e>0&&e<=this.totalPages&&(this.options.page=e,this.getData())}nextPage(){this.options.page<this.totalPages&&this.setPage(this.options.page+1)}previousPage(){this.options.page>1&&this.setPage(this.options.page-1)}setSort(e,t=""){this.options.sort.column=e,this.options.sort.direction=t,this.options.page=1,this.getData()}setSearch(e="",t=[]){this.options.search.term=e,this.options.search.column=t,this.options.page=1,this.getData()}genPagination(e=5){this.totalPages=Math.ceil(+this.response.data.count/25);let t=this.domElement.querySelector(".pagination");t?t.innerHTML="":(t=document.createElement("ul"),t.classList.add("pagination"));const s=document.createElement("li");s.classList.add("page-item"),s.innerHTML='<span class="icon">chevron_left</span>',1===this.options.page?(s.classList.add("disabled"),s.style.cursor="default"):s.addEventListener("click",this.previousPage.bind(this)),t.append(s);let i=this.options.page,a=this.totalPages;if(this.totalPages<=e)i=1,a<i&&(a=i);else{let t=e/2;for(let e=0;e<t;e++)this.options.page-e>0&&i--;a=i+e,a>this.totalPages&&(a=this.totalPages,i=a-e),i++}for(let e=i;e<=a;e++){const s=document.createElement("li");s.classList.add("page-item"),s.textContent=e,e===this.options.page?(s.classList.add("active"),s.style.cursor="default"):s.addEventListener("click",this.setPage.bind(this,e)),t.append(s)}const n=document.createElement("li");n.classList.add("page-item"),n.innerHTML='<span class="icon">chevron_right</span>',this.options.page===a?(n.classList.add("disabled"),n.style.cursor="default"):s.addEventListener("click",this.nextPage.bind(this)),t.append(n),this.domElement.querySelector(".pagination")||this.domElement.append(t)}rowClick(e){const t=this.tableDiv.querySelectorAll("tbody tr");this.rowCallback=e,t.forEach((e=>{e.addEventListener("click",(()=>{this.rowCallback(e)}))}))}getData(){const e=this.tableDiv.querySelector("tbody");if(e.querySelectorAll("tr").forEach((t=>{e.removeChild(t)})),this.paginationDiv){const e=this.paginationDiv.querySelector("ul");this.paginationDiv.removeChild(e)}this.helpers.error.classList.add("d-none"),this.tableDiv.classList.add("d-none"),this.helpers.loading.classList.remove("d-none"),this.helpers.empty.classList.add("d-none");const t=new FormData;t.append("page",this.page),t.append("instruction","read"),t.append("options",JSON.stringify(this.options));const s={method:"POST",body:t};fetch(this.destination,s).then((e=>e.json())).then((e=>{3===e.response?this.helpers.error.classList.remove("d-none"):(this.response=e,this.data=this.response.data,0==this.data.length?this.helpers.empty.classList.remove("d-none"):(this.displayTable(),this.tableDiv.classList.remove("d-none")))})).catch((e=>{this.helpers.error.classList.remove("d-none")})).finally((()=>{this.helpers.loading.classList.add("d-none")}))}},PanelView:class{constructor(e,t=!1){if(this.domElement=e,this.circular=t,this.panels=this.domElement.querySelectorAll(".panel"),0==this.panels.length)return;this.domElement.querySelector(".panel.show")||this.panels[0].classList.add("show");const s=Array.from(this.panels).indexOf(this.domElement.querySelector(".panel.show"));this.setPanel(s)}setPanel(e){e<0?this.setPanel(0):e>=this.panels.length?this.setPanel(this.panels.length):(this.currentPanel=e,this.panels.forEach(((e,t)=>{e.classList.remove("show"),e.classList.remove("before"),e.classList.remove("after"),t<this.currentPanel&&e.classList.add("before"),t>this.currentPanel&&e.classList.add("after")})),this.panels[e].classList.add("show"),this.updateContainerHeight())}nextPanel(){this.currentPanel<this.panels.length-1?this.setPanel(this.currentPanel+1):this.circular&&this.setPanel(0)}previousPanel(){this.currentPanel>0?this.setPanel(this.currentPanel-1):this.circular&&this.setPanel(this.panels.length-1)}updateContainerHeight(){const e=this.panels[this.currentPanel];this.domElement.style.height=`${e.offsetHeight}px`}}};